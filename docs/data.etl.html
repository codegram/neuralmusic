---

title: ETL to process MIDI files
keywords: fastai
sidebar: home_sidebar

summary: "Turning a bunch of MIDI files into parquet data"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/02_data.etl.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="init_stats" class="doc_header"><code>init_stats</code><a href="https://github.com/codegram/neuralmusic/tree/master/neuralmusic/data/etl.py#L34" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>init_stats</code>()</p>
</blockquote>
<p>Resets reporting stats to zero.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="report" class="doc_header"><code>report</code><a href="https://github.com/codegram/neuralmusic/tree/master/neuralmusic/data/etl.py#L52" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>report</code>(<strong><code>logger</code></strong>)</p>
</blockquote>
<p>Reports current metrics, either to Spell or to a logger.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Untar'ing-the-file">Untar'ing the file<a class="anchor-link" href="#Untar'ing-the-file">&#182;</a></h2><p>The first step is to untar the file containing the MIDI files.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="<Task: untar_cmd>" class="doc_header"><code><Task: untar_cmd></code><a href="" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code><Task: untar_cmd></code>(<strong>*<code>args</code></strong>:<code>Any</code>, <strong><code>mapped</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>task_args</code></strong>:<code>dict</code>=<em><code>None</code></em>, <strong><code>upstream_tasks</code></strong>:<code>Iterable</code>[<code>Any</code>]=<em><code>None</code></em>, <strong><code>flow</code></strong>:<code>Flow</code>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>:<code>Any</code>)</p>
</blockquote>
<p>A convenience Task for functionally creating Task instances with
arbitrary callable <code>run</code> methods.</p>
<p>Args:</p>

<pre><code>- fn (callable): the function to be the task's `run` method
- name (str, optional): the name of this task
- **kwargs: keyword arguments that will be passed to the Task
    constructor

</code></pre>
<p>Raises:</p>

<pre><code>- ValueError: if the provided function violates signature requirements
    for Task run methods

</code></pre>
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="n">task</span> <span class="o">=</span> <span class="n">FunctionTask</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">42</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Subtract 42&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">Flow</span><span class="p">(</span><span class="s2">&quot;My Flow&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">task</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</pre></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Partitioning-the-files-in-minibatches">Partitioning the files in minibatches<a class="anchor-link" href="#Partitioning-the-files-in-minibatches">&#182;</a></h2><p>Since the tar.gz file may contain a huge amount of MIDI files, we'll partition those files into minibatches that we can process in parallel.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="<Task: partition_files>" class="doc_header"><code><Task: partition_files></code><a href="" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code><Task: partition_files></code>(<strong>*<code>args</code></strong>:<code>Any</code>, <strong><code>mapped</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>task_args</code></strong>:<code>dict</code>=<em><code>None</code></em>, <strong><code>upstream_tasks</code></strong>:<code>Iterable</code>[<code>Any</code>]=<em><code>None</code></em>, <strong><code>flow</code></strong>:<code>Flow</code>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>:<code>Any</code>)</p>
</blockquote>
<p>A convenience Task for functionally creating Task instances with
arbitrary callable <code>run</code> methods.</p>
<p>Args:</p>

<pre><code>- fn (callable): the function to be the task's `run` method
- name (str, optional): the name of this task
- **kwargs: keyword arguments that will be passed to the Task
    constructor

</code></pre>
<p>Raises:</p>

<pre><code>- ValueError: if the provided function violates signature requirements
    for Task run methods

</code></pre>
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="n">task</span> <span class="o">=</span> <span class="n">FunctionTask</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">42</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Subtract 42&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">Flow</span><span class="p">(</span><span class="s2">&quot;My Flow&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">task</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</pre></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Processing-a-minibatch">Processing a minibatch<a class="anchor-link" href="#Processing-a-minibatch">&#182;</a></h2><p>For each minibatch, we'll go through its MIDI files, parse them, and write them to a separate Parquet file.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="<Task: process_and_write>" class="doc_header"><code><Task: process_and_write></code><a href="" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code><Task: process_and_write></code>(<strong>*<code>args</code></strong>:<code>Any</code>, <strong><code>mapped</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>task_args</code></strong>:<code>dict</code>=<em><code>None</code></em>, <strong><code>upstream_tasks</code></strong>:<code>Iterable</code>[<code>Any</code>]=<em><code>None</code></em>, <strong><code>flow</code></strong>:<code>Flow</code>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>:<code>Any</code>)</p>
</blockquote>
<p>A convenience Task for functionally creating Task instances with
arbitrary callable <code>run</code> methods.</p>
<p>Args:</p>

<pre><code>- fn (callable): the function to be the task's `run` method
- name (str, optional): the name of this task
- **kwargs: keyword arguments that will be passed to the Task
    constructor

</code></pre>
<p>Raises:</p>

<pre><code>- ValueError: if the provided function violates signature requirements
    for Task run methods

</code></pre>
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="n">task</span> <span class="o">=</span> <span class="n">FunctionTask</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">42</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Subtract 42&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">Flow</span><span class="p">(</span><span class="s2">&quot;My Flow&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">task</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</pre></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Merging-the-parquet-files">Merging the parquet files<a class="anchor-link" href="#Merging-the-parquet-files">&#182;</a></h2><p>Once we have all the minibatches in separate parquet files, merging them into a single dataset is trivial.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="<Task: combine_parquet_files>" class="doc_header"><code><Task: combine_parquet_files></code><a href="" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code><Task: combine_parquet_files></code>(<strong>*<code>args</code></strong>:<code>Any</code>, <strong><code>mapped</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>task_args</code></strong>:<code>dict</code>=<em><code>None</code></em>, <strong><code>upstream_tasks</code></strong>:<code>Iterable</code>[<code>Any</code>]=<em><code>None</code></em>, <strong><code>flow</code></strong>:<code>Flow</code>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>:<code>Any</code>)</p>
</blockquote>
<p>A convenience Task for functionally creating Task instances with
arbitrary callable <code>run</code> methods.</p>
<p>Args:</p>

<pre><code>- fn (callable): the function to be the task's `run` method
- name (str, optional): the name of this task
- **kwargs: keyword arguments that will be passed to the Task
    constructor

</code></pre>
<p>Raises:</p>

<pre><code>- ValueError: if the provided function violates signature requirements
    for Task run methods

</code></pre>
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="n">task</span> <span class="o">=</span> <span class="n">FunctionTask</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">42</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Subtract 42&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">Flow</span><span class="p">(</span><span class="s2">&quot;My Flow&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">task</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</pre></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Putting-everything-together">Putting everything together<a class="anchor-link" href="#Putting-everything-together">&#182;</a></h2><p>Now we can build the ETL flow!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="build_etl" class="doc_header"><code>build_etl</code><a href="https://github.com/codegram/neuralmusic/tree/master/neuralmusic/data/etl.py#L146" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>build_etl</code>(<strong><code>cfg</code></strong>)</p>
</blockquote>
<p>Builds the ETL flow.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Testing-the-ETL">Testing the ETL<a class="anchor-link" href="#Testing-the-ETL">&#182;</a></h2><p>The ETL accepts a <code>tar.gz</code> file input containing MIDI files:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># test</span>
<span class="kn">from</span> <span class="nn">testing</span> <span class="kn">import</span> <span class="n">test_eq</span><span class="p">,</span> <span class="n">path</span>
<span class="kn">from</span> <span class="nn">omegaconf</span> <span class="kn">import</span> <span class="n">OmegaConf</span>
<span class="kn">import</span> <span class="nn">fastparquet</span>

<span class="n">tmp_path</span> <span class="o">=</span> <span class="s2">&quot;/tmp/neuralmusic_etl&quot;</span>

<span class="n">targz_path</span> <span class="o">=</span> <span class="n">path</span><span class="p">(</span><span class="s2">&quot;data/midi.tar.gz&quot;</span><span class="p">)</span>

<span class="n">dot_list</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;tar_gz_path=</span><span class="si">{targz_path}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;outdir=</span><span class="si">{tmp_path}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;partition_size=1&quot;</span><span class="p">]</span>
<span class="n">etl_cfg</span> <span class="o">=</span> <span class="n">OmegaConf</span><span class="o">.</span><span class="n">from_dotlist</span><span class="p">(</span><span class="n">dot_list</span><span class="p">)</span>
<span class="n">flow</span> <span class="o">=</span> <span class="n">build_etl</span><span class="p">(</span><span class="n">etl_cfg</span><span class="p">)</span>

<span class="n">init_stats</span><span class="p">()</span>

<span class="n">started_at</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">flow</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">test_eq</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">total_songs</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">malformed_songs</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">valid_songs</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">valid_rows</span><span class="p">)</span>


<span class="n">df</span> <span class="o">=</span> <span class="n">fastparquet</span><span class="o">.</span><span class="n">ParquetFile</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="n">test_eq</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>

<span class="c1"># TODO: figure out order!</span>
<span class="c1"># test_eq([&quot;7.11.2&quot;, &quot;7&quot;, &quot;7&quot;], pitches[0:3])</span>
<span class="c1"># test_eq([1.75, 0.5, 0.5], durations[0:3])</span>
<span class="c1"># test_eq([110, 110, 110], velocities[0:3])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>[2019-12-21 16:07:51,597] INFO - prefect.FlowRunner | Beginning Flow run for &#39;Neuralmusic Data ETL&#39;
[2019-12-21 16:07:51,600] INFO - prefect.FlowRunner | Starting flow run.
[2019-12-21 16:07:51,626] INFO - prefect.TaskRunner | Task &#39;untar_cmd&#39;: Starting task run...
[2019-12-21 16:07:51,643] INFO - prefect.TaskRunner | Task &#39;untar_cmd&#39;: finished task run for task with final state: &#39;Skipped&#39;
[2019-12-21 16:07:51,665] INFO - prefect.TaskRunner | Task &#39;untar_task&#39;: Starting task run...
[2019-12-21 16:07:51,677] INFO - prefect.TaskRunner | Task &#39;untar_task&#39;: finished task run for task with final state: &#39;Skipped&#39;
[2019-12-21 16:07:51,699] INFO - prefect.TaskRunner | Task &#39;partition_files&#39;: Starting task run...
[2019-12-21 16:07:51,702] INFO - prefect.Task: partition_files | Processing 4 MIDI files partitioned into groups of 1
[2019-12-21 16:07:51,719] INFO - prefect.TaskRunner | Task &#39;partition_files&#39;: finished task run for task with final state: &#39;Success&#39;
[2019-12-21 16:07:51,734] INFO - prefect.TaskRunner | Task &#39;process_and_write&#39;: Starting task run...
[2019-12-21 16:07:51,753] INFO - prefect.TaskRunner | Task &#39;process_and_write[0]&#39;: Starting task run...
[2019-12-21 16:07:53,568] INFO - prefect.TaskRunner | Task &#39;process_and_write[0]&#39;: finished task run for task with final state: &#39;Success&#39;
[2019-12-21 16:07:53,578] INFO - prefect.TaskRunner | Task &#39;process_and_write[1]&#39;: Starting task run...
[2019-12-21 16:07:55,107] INFO - prefect.TaskRunner | Task &#39;process_and_write[1]&#39;: finished task run for task with final state: &#39;Success&#39;
[2019-12-21 16:07:55,113] INFO - prefect.TaskRunner | Task &#39;process_and_write[2]&#39;: Starting task run...
[2019-12-21 16:07:56,148] INFO - prefect.TaskRunner | Task &#39;process_and_write[2]&#39;: finished task run for task with final state: &#39;Success&#39;
[2019-12-21 16:07:56,153] INFO - prefect.TaskRunner | Task &#39;process_and_write[3]&#39;: Starting task run...
[2019-12-21 16:07:56,849] INFO - prefect.TaskRunner | Task &#39;process_and_write[3]&#39;: finished task run for task with final state: &#39;Success&#39;
[2019-12-21 16:07:56,858] INFO - prefect.TaskRunner | Task &#39;process_and_write&#39;: finished task run for task with final state: &#39;Mapped&#39;
[2019-12-21 16:07:56,882] INFO - prefect.TaskRunner | Task &#39;combine_parquet_files&#39;: Starting task run...
[2019-12-21 16:07:56,911] INFO - prefect.TaskRunner | Task &#39;combine_parquet_files&#39;: finished task run for task with final state: &#39;Success&#39;
[2019-12-21 16:07:56,914] INFO - prefect.FlowRunner | Flow run SUCCESS: all reference tasks succeeded
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It also accepts a path to a folder with MIDI files:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># test</span>
<span class="kn">from</span> <span class="nn">testing</span> <span class="kn">import</span> <span class="n">test_eq</span><span class="p">,</span> <span class="n">path</span>
<span class="kn">from</span> <span class="nn">omegaconf</span> <span class="kn">import</span> <span class="n">OmegaConf</span>
<span class="kn">import</span> <span class="nn">fastparquet</span>

<span class="n">tmp_path</span> <span class="o">=</span> <span class="s2">&quot;/tmp/neuralmusic_etl&quot;</span>

<span class="n">midi_path</span> <span class="o">=</span> <span class="n">path</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">)</span>

<span class="n">dot_list</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;midi_path=</span><span class="si">{midi_path}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;outdir=</span><span class="si">{tmp_path}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;partition_size=1&quot;</span><span class="p">]</span>
<span class="n">etl_cfg</span> <span class="o">=</span> <span class="n">OmegaConf</span><span class="o">.</span><span class="n">from_dotlist</span><span class="p">(</span><span class="n">dot_list</span><span class="p">)</span>
<span class="n">flow</span> <span class="o">=</span> <span class="n">build_etl</span><span class="p">(</span><span class="n">etl_cfg</span><span class="p">)</span>

<span class="n">init_stats</span><span class="p">()</span>

<span class="n">started_at</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">flow</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">test_eq</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">total_songs</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">malformed_songs</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">valid_songs</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">valid_rows</span><span class="p">)</span>


<span class="n">df</span> <span class="o">=</span> <span class="n">fastparquet</span><span class="o">.</span><span class="n">ParquetFile</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="n">test_eq</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>

<span class="c1"># TODO: figure out order!</span>
<span class="c1"># test_eq([&quot;7.11.2&quot;, &quot;7&quot;, &quot;7&quot;], pitches[0:3])</span>
<span class="c1"># test_eq([1.75, 0.5, 0.5], durations[0:3])</span>
<span class="c1"># test_eq([110, 110, 110], velocities[0:3])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>[2019-12-21 16:08:00,888] INFO - prefect.FlowRunner | Beginning Flow run for &#39;Neuralmusic Data ETL&#39;
[2019-12-21 16:08:00,905] INFO - prefect.FlowRunner | Starting flow run.
[2019-12-21 16:08:00,926] INFO - prefect.TaskRunner | Task &#39;partition_files&#39;: Starting task run...
[2019-12-21 16:08:00,934] INFO - prefect.Task: partition_files | Processing 4 MIDI files partitioned into groups of 1
[2019-12-21 16:08:00,966] INFO - prefect.TaskRunner | Task &#39;partition_files&#39;: finished task run for task with final state: &#39;Success&#39;
[2019-12-21 16:08:00,984] INFO - prefect.TaskRunner | Task &#39;process_and_write&#39;: Starting task run...
[2019-12-21 16:08:00,999] INFO - prefect.TaskRunner | Task &#39;process_and_write[0]&#39;: Starting task run...
[2019-12-21 16:08:01,764] INFO - prefect.TaskRunner | Task &#39;process_and_write[0]&#39;: finished task run for task with final state: &#39;Success&#39;
[2019-12-21 16:08:01,772] INFO - prefect.TaskRunner | Task &#39;process_and_write[1]&#39;: Starting task run...
[2019-12-21 16:08:02,979] INFO - prefect.TaskRunner | Task &#39;process_and_write[1]&#39;: finished task run for task with final state: &#39;Success&#39;
[2019-12-21 16:08:02,987] INFO - prefect.TaskRunner | Task &#39;process_and_write[2]&#39;: Starting task run...
[2019-12-21 16:08:04,316] INFO - prefect.TaskRunner | Task &#39;process_and_write[2]&#39;: finished task run for task with final state: &#39;Success&#39;
[2019-12-21 16:08:04,323] INFO - prefect.TaskRunner | Task &#39;process_and_write[3]&#39;: Starting task run...
[2019-12-21 16:08:05,565] INFO - prefect.TaskRunner | Task &#39;process_and_write[3]&#39;: finished task run for task with final state: &#39;Success&#39;
[2019-12-21 16:08:05,571] INFO - prefect.TaskRunner | Task &#39;process_and_write&#39;: finished task run for task with final state: &#39;Mapped&#39;
[2019-12-21 16:08:05,618] INFO - prefect.TaskRunner | Task &#39;combine_parquet_files&#39;: Starting task run...
[2019-12-21 16:08:05,646] INFO - prefect.TaskRunner | Task &#39;combine_parquet_files&#39;: finished task run for task with final state: &#39;Success&#39;
[2019-12-21 16:08:05,648] INFO - prefect.FlowRunner | Flow run SUCCESS: all reference tasks succeeded
</pre>
</div>
</div>

</div>
</div>

</div>
</div>
 

